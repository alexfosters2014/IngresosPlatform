@page "/Usuarios/Eliminar/{usuarioId:int}"
@inject IServiceUsuario serviceUsuario;
@inject NavigationManager nav
@inject ILocalStorageService localStorage

<Loading />

@code {
    [Parameter]
    public int usuarioId { get; set; }
    private UsuarioDTO usuario;

    protected override void OnInitialized()
    {
        EliminarUsuarioSel();
    }

    protected override void OnParametersSet()
    {
        EliminarUsuarioSel();
    }


    public async void EliminarUsuarioSel()
    {
        usuario = await localStorage.GetItemAsync<UsuarioDTO>(SD.LocalUsuario);
        if (usuario == null)
        {
            nav.NavigateTo("/", true);
        }
        else
        {
            int usuarioEliminado = await serviceUsuario.EliminarUsuario(usuarioId,usuario.Token);

            if (usuarioEliminado != 0)
            {
                nav.NavigateTo("/Usuarios", true);
            }
            else
            {
                Console.WriteLine("error");
            }
        }

    }


}
}
