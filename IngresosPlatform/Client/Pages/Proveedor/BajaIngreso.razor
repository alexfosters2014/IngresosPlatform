@page "/Ingresos/Baja/{ingresoId:int}"
@inject IServiceIngreso serviceIngreso
@inject NavigationManager nav
@inject ILocalStorageService localStorage

<Loading />

@code {
    [Parameter]
    public int ingresoId { get; set; }
    private string token;

    protected override void OnInitialized()
    {
        BajaIngresoporId();
    }

    protected override void OnParametersSet()
    {
        BajaIngresoporId();
    }


    public async void BajaIngresoporId()
    {
        token = await localStorage.GetItemAsync<string>(SD.LocalToken);
        int resultado = await serviceIngreso.EliminarIngreso(ingresoId, token);

        if (resultado > 0)
        {
            nav.NavigateTo("/Revisiones", true);
        }
        else {
            Console.WriteLine("error");
        }
    }

}
