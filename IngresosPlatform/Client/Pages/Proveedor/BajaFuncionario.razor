@page "/Funcionarios/Baja/{funcionarioId:int}"
@inject IServiceFuncionario serviceFuncionario
@inject NavigationManager nav
@inject ILocalStorageService localStorage


<Loading />

@code {
    [Parameter]
    public int funcionarioId { get; set; }
    private string token;

    protected override void OnInitialized()
    {
        BajaFun();
    }

    protected override void OnParametersSet()
    {
        BajaFun();
    }


    public async void BajaFun()
    {
        token = await localStorage.GetItemAsync<string>(SD.LocalToken);
        int resultado = await serviceFuncionario.Eliminar(funcionarioId, token);

        if (resultado > 0)
        {
            nav.NavigateTo("/Funcionarios", true);
        }
        else {
            Console.WriteLine("error");
        }
    }

}
